<script src="node_modules/@antv/g6/dist/g6.min.js"></script>
<div id="mountNode" style="position: absolute"></div>
<script>
const data = {
  // 点集
  nodes: [
    {
      id: 'node1', // String，该节点存在则必须，节点的唯一标识
      label: 'node1',
    },
    {
      id: 'node2', // String，该节点存在则必须，节点的唯一标识
      label: 'node2',
    },
  ],
  // 边集
  edges: [
    {
      source: 'node1', // String，必须，起始点 id
      target: 'node2', // String，必须，目标点 id
    },
  ],
};
const graph = new G6.Graph({
  container: 'mountNode', // String | HTMLElement，必须，在 Step 1 中创建的容器 id 或容器本身
  width: 800, // Number，必须，图的宽度
  height: 500, // Number，必须，图的高度
  modes: {
    default: ['drag-canvas', 'drag-node'],
  },
  layout: {
    type: 'force',
    animate: false,
    preventOverlap: true, // 防止结点重叠
  },
  defaultEdge: {
    style: {
      endArrow: true
    },
    labelCfg: {
      autoRotate: true,
    }
  },
  defaultNode: {
    type: 'donut',
    style: {
      lineWidth: 0,
    },
    labelCfg: {
      position: 'bottom',
    },
  },
});
graph.read(data)
let i = 3
var inter = setInterval(function() {
  if (i > 10 ) {
    clearInterval(inter)
  }
  console.log(i)
  graph.addItem('node', { id: 'node' + i })
  graph.addItem('edge', { source: 'node' + i,  target: 'node1', color: '#aaa', size: 1 } )
  i++
  graph.addItem('node', { id: 'node' + i })
  graph.addItem('edge',{ source: 'node' + i,  target: 'node1', color: '#FB4B4B', size: 3, style: { opacity: 0.7 } } )
  i++
  graph.removeItem('node' + i + 2)
  graph.layout()
}, 1000)
</script>
